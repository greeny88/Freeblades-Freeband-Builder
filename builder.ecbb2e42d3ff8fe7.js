"use strict";(self.webpackChunkfreeblades_freeband_builder=self.webpackChunkfreeblades_freeband_builder||[]).push([[447],{3699:(li,ee,h)=>{h.r(ee),h.d(ee,{BuilderModule:()=>oi});var y=h(9808),g=h(3075),A=h(7423),q=h(7446),B=h(9776),k=h(7429),e=h(5e3),M=h(508),te=h(226),E=h(7579),Me=h(9770),xe=h(9646),J=h(9300),H=h(5698),Ae=h(8675),G=h(925),v=h(1777),P=h(5664),ie=h(1159),ne=h(6360);function Te(n,a){}class V{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Ze={dialogContainer:(0,v.X$)("dialogContainer",[(0,v.SB)("void, exit",(0,v.oB)({opacity:0,transform:"scale(0.7)"})),(0,v.SB)("enter",(0,v.oB)({transform:"none"})),(0,v.eR)("* => enter",(0,v.ru)([(0,v.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,v.oB)({transform:"none",opacity:1})),(0,v.IO)("@*",(0,v.pV)(),{optional:!0})])),(0,v.eR)("* => void, * => exit",(0,v.ru)([(0,v.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,v.oB)({opacity:0})),(0,v.IO)("@*",(0,v.pV)(),{optional:!0})]))])};let ke=(()=>{class n extends k.en{constructor(t,i,o,s,l,u,d,m){super(),this._elementRef=t,this._focusTrapFactory=i,this._changeDetectorRef=o,this._config=l,this._interactivityChecker=u,this._ngZone=d,this._focusMonitor=m,this._animationStateChanged=new e.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=f=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(f)),this._ariaLabelledBy=l.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,G.ht)())}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const o=()=>{t.removeEventListener("blur",o),t.removeEventListener("mousedown",o),t.removeAttribute("tabindex")};t.addEventListener("blur",o),t.addEventListener("mousedown",o)})),t.focus(i)}_focusByCssSelector(t,i){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const i=(0,G.ht)(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=(0,G.ht)();return t===i||t.contains(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(P.qV),e.Y36(e.sBO),e.Y36(y.K0,8),e.Y36(V),e.Y36(P.ic),e.Y36(e.R0b),e.Y36(P.tE))},n.\u0275dir=e.lG2({type:n,viewQuery:function(t,i){if(1&t&&e.Gf(k.Pl,7),2&t){let o;e.iGM(o=e.CRH())&&(i._portalOutlet=o.first)}},features:[e.qOj]}),n})(),Fe=(()=>{class n extends ke{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:i}){"enter"===t?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:t,totalTime:i}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,i){1&t&&e.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&t&&(e.Ikx("id",i._id),e.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),e.d8E("@dialogContainer",i._state))},features:[e.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&e.YNc(0,Te,0,0,"ng-template",0)},directives:[k.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ze.dialogContainer]}}),n})(),Se=0;class D{constructor(a,t,i="mat-dialog-"+Se++){this._overlayRef=a,this._containerInstance=t,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new E.x,this._afterClosed=new E.x,this._beforeClosed=new E.x,this._state=0,t._id=i,t._animationStateChanged.pipe((0,J.h)(o=>"opened"===o.state),(0,H.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe((0,J.h)(o=>"closed"===o.state),(0,H.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),a.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),a.keydownEvents().pipe((0,J.h)(o=>o.keyCode===ie.hY&&!this.disableClose&&!(0,ie.Vb)(o))).subscribe(o=>{o.preventDefault(),z(this,"keyboard")}),a.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():z(this,"mouse")})}close(a){this._result=a,this._containerInstance._animationStateChanged.pipe((0,J.h)(t=>"closing"===t.state),(0,H.q)(1)).subscribe(t=>{this._beforeClosed.next(a),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(a){let t=this._getPositionStrategy();return a&&(a.left||a.right)?a.left?t.left(a.left):t.right(a.right):t.centerHorizontally(),a&&(a.top||a.bottom)?a.top?t.top(a.top):t.bottom(a.bottom):t.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(a="",t=""){return this._overlayRef.updateSize({width:a,height:t}),this._overlayRef.updatePosition(),this}addPanelClass(a){return this._overlayRef.addPanelClass(a),this}removePanelClass(a){return this._overlayRef.removePanelClass(a),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function z(n,a,t){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=a),n.close(t)}const oe=new e.OlP("MatDialogData"),De=new e.OlP("mat-dialog-default-options"),ae=new e.OlP("mat-dialog-scroll-strategy"),Oe={provide:ae,deps:[B.aV],useFactory:function Re(n){return()=>n.scrollStrategies.block()}};let we=(()=>{class n{constructor(t,i,o,s,l,u,d,m,f,b){this._overlay=t,this._injector=i,this._defaultOptions=o,this._parentDialog=s,this._overlayContainer=l,this._dialogRefConstructor=d,this._dialogContainerType=m,this._dialogDataToken=f,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new E.x,this._afterOpenedAtThisLevel=new E.x,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,Me.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,Ae.O)(void 0))),this._scrollStrategy=u}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){i=function Le(n,a){return Object.assign(Object.assign({},a),n)}(i,this._defaultOptions||new V),i.id&&this.getDialogById(i.id);const o=this._createOverlay(i),s=this._attachDialogContainer(o,i),l=this._attachDialogContent(t,s,o,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.afterClosed().subscribe(()=>this._removeOpenDialog(l)),this.afterOpened.next(l),s._initializeWithAttachedContent(),l}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const i=this._getOverlayConfig(t);return this._overlay.create(i)}_getOverlayConfig(t){const i=new B.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachDialogContainer(t,i){const s=e.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:V,useValue:i}]}),l=new k.C5(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,o,s){const l=new this._dialogRefConstructor(o,i,s.id);if(t instanceof e.Rgc)i.attachTemplatePortal(new k.UE(t,null,{$implicit:s.data,dialogRef:l}));else{const u=this._createInjector(s,l,i),d=i.attachComponentPortal(new k.C5(t,s.viewContainerRef,u,s.componentFactoryResolver));l.componentInstance=d.instance}return l.updateSize(s.width,s.height).updatePosition(s.position),l}_createInjector(t,i,o){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,l=[{provide:this._dialogContainerType,useValue:o},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:i}];return t.direction&&(!s||!s.get(te.Is,null,e.XFs.Optional))&&l.push({provide:te.Is,useValue:{value:t.direction,change:(0,xe.of)()}}),e.zs3.create({parent:s||this._injector,providers:l})}_removeOpenDialog(t){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let o=i.length-1;o>-1;o--){let s=i[o];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n}),n})(),U=(()=>{class n extends we{constructor(t,i,o,s,l,u,d,m){super(t,i,s,u,d,l,D,Fe,oe,m)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(B.aV),e.LFG(e.zs3),e.LFG(y.Ye,8),e.LFG(De,8),e.LFG(ae),e.LFG(n,12),e.LFG(B.Xj),e.LFG(ne.Qb,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=0,se=(()=>{class n{constructor(t,i,o){this.dialogRef=t,this._elementRef=i,this._dialog=o,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=le(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){z(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D,8),e.Y36(e.SBq),e.Y36(U))},n.\u0275dir=e.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&e.NdJ("click",function(s){return i._onButtonClick(s)}),2&t&&e.uIk("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[e.TTD]}),n})(),$=(()=>{class n{constructor(t,i,o){this._dialogRef=t,this._elementRef=i,this._dialog=o,this.id="mat-dialog-title-"+Ie++}ngOnInit(){this._dialogRef||(this._dialogRef=le(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D,8),e.Y36(e.SBq),e.Y36(U))},n.\u0275dir=e.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,i){2&t&&e.Ikx("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),K=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),W=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})();function le(n,a){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?a.find(i=>i.id===t.id):null}let re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[U,Oe],imports:[[B.U8,k.eL,M.BQ],M.BQ]}),n})();var X=h(4449),de=h(1271),j=h(7322),Q=h(7531),N=h(4107);let qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[y.ez,g.u5,A.ot,q.p9,j.lN,Q.c,N.LD]]}),n})();var R=h(3191),Be=h(449);const Ee=["input"],Ue=function(n){return{enterDuration:n}},Ne=["*"],Je=new e.OlP("mat-radio-default-options",{providedIn:"root",factory:function Pe(){return{color:"accent"}}});let ce=0;const je={provide:g.JU,useExisting:(0,e.Gpc)(()=>he),multi:!0};class ue{constructor(a,t){this.source=a,this.value=t}}const me=new e.OlP("MatRadioGroup");let Qe=(()=>{class n{constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+ce++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new e.vpe}get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,R.Ig)(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=(0,R.Ig)(t),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new ue(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275dir=e.lG2({type:n,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),n})(),he=(()=>{class n extends Qe{}return n.\u0275fac=function(){let a;return function(i){return(a||(a=e.n5z(n)))(i||n)}}(),n.\u0275dir=e.lG2({type:n,selectors:[["mat-radio-group"]],contentQueries:function(t,i,o){if(1&t&&e.Suo(o,pe,5),2&t){let s;e.iGM(s=e.CRH())&&(i._radios=s)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[e._Bn([je,{provide:me,useExisting:n}]),e.qOj]}),n})();class Ye{constructor(a){this._elementRef=a}}const He=(0,M.Kr)((0,M.sb)(Ye));let Ge=(()=>{class n extends He{constructor(t,i,o,s,l,u,d,m){super(i),this._changeDetector=o,this._focusMonitor=s,this._radioDispatcher=l,this._providerOverride=d,this._uniqueId="mat-radio-"+ ++ce,this.id=this._uniqueId,this.change=new e.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===u,m&&(this.tabIndex=(0,R.su)(m,0)),this._removeUniqueSelectionListener=l.listen((f,b)=>{f!==this.id&&b===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(t){const i=(0,R.Ig)(t);this._checked!==i&&(this._checked=i,i&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!i&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),i&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled((0,R.Ig)(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=(0,R.Ig)(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}focus(t,i){i?this._focusMonitor.focusVia(this._inputElement,i,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new ue(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_updateTabIndex(){var t;const i=this.radioGroup;let o;if(o=i&&i.selected&&!this.disabled?i.selected===this?this.tabIndex:-1:this.tabIndex,o!==this._previousTabIndex){const s=null===(t=this._inputElement)||void 0===t?void 0:t.nativeElement;s&&(s.setAttribute("tabindex",o+""),this._previousTabIndex=o)}}}return n.\u0275fac=function(t){e.$Z()},n.\u0275dir=e.lG2({type:n,viewQuery:function(t,i){if(1&t&&e.Gf(Ee,5),2&t){let o;e.iGM(o=e.CRH())&&(i._inputElement=o.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[e.qOj]}),n})(),pe=(()=>{class n extends Ge{constructor(t,i,o,s,l,u,d,m){super(t,i,o,s,l,u,d,m)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(me,8),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(P.tE),e.Y36(Be.A8),e.Y36(ne.Qb,8),e.Y36(Je,8),e.$8M("tabindex"))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(t,i){1&t&&e.NdJ("focus",function(){return i._inputElement.nativeElement.focus()}),2&t&&(e.uIk("tabindex",null)("id",i.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),e.ekj("mat-radio-checked",i.checked)("mat-radio-disabled",i.disabled)("_mat-animation-noopable",i._noopAnimations)("mat-primary","primary"===i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[e.qOj],ngContentSelectors:Ne,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(t,i){if(1&t&&(e.F$t(),e.TgZ(0,"label",0,1)(2,"span",2),e._UZ(3,"span",3)(4,"span",4),e.TgZ(5,"input",5,6),e.NdJ("change",function(s){return i._onInputInteraction(s)})("click",function(s){return i._onInputClick(s)}),e.qZA(),e.TgZ(7,"span",7),e._UZ(8,"span",8),e.qZA()(),e.TgZ(9,"span",9)(10,"span",10),e._uU(11,"\xa0"),e.qZA(),e.Hsn(12),e.qZA()()),2&t){const o=e.MAs(1);e.uIk("for",i.inputId),e.xp6(5),e.Q6J("id",i.inputId)("checked",i.checked)("disabled",i.disabled)("required",i.required),e.uIk("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),e.xp6(2),e.Q6J("matRippleTrigger",o)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",e.VKq(17,Ue,i._noopAnimations?0:150)),e.xp6(2),e.ekj("mat-radio-label-before","before"==i.labelPosition)}},directives:[M.wG],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),Ve=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[M.si,M.BQ],M.BQ]}),n})();var _e=h(9134);let ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[_e.q],imports:[[y.ez,g.u5,A.ot,q.p9,re,Q.c,Ve,N.LD]]}),n})();var fe=h(6696),ge=h(8855),$e=h(1423),Ke=h(2728),We=h(5247);function Xe(n,a){if(1&n&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}let et=(()=>{class n{constructor(){this.selectedOptions=void 0,this.onOptionsSet=new e.vpe,this.altLeader=!1,this.freebandLimit=0,this.selectedFaction="",this.disallowedAltLeadersFactions=["Darkgrove Demons","Demons of Karelon","Koronnan Moonsworn","Ravenblade Mercenaries"],this.factions=["Azura Windborne","Black Rose Bandits","Black Thorn Bandits","The Collective","Darkgrove Demons","Demons of Karelon","Eclipse Sisterhood","Falkaaran Adventurers","Grular Invaders","Haradelan Questers","Kandoran Deathmasters","Koronnan Moonsworn","Kuzaarik Forgers","Mershael Corsairs","Ravenblade Mercenaries","Shakrim Wavestalkers","Traazorite Crusaders","Trilian Seekers","Urdaggar Tribes of Ruin","Urdaggar Tribes of Valor","Varkraalan Unchained"],this.options={freebandLimit:void 0,faction:void 0,altLeader:!1}}ngOnInit(){}ngOnChanges(){this.selectedOptions&&(this.freebandLimit=this.selectedOptions.freebandLimit,this.selectedFaction=this.selectedOptions.faction,this.altLeader=this.selectedOptions.altLeader,this.optionsSet())}optionsSet(){this.options={freebandLimit:this.freebandLimit,faction:this.selectedFaction,altLeader:this.altLeader&&this.disallowedAltLeadersFactions.indexOf(this.selectedFaction)<0},this.onOptionsSet.emit(this.options)}updateDisabled(){return void 0===this.freebandLimit||this.freebandLimit<1||void 0===this.selectedFaction||this.options.altLeader===this.altLeader&&this.options.faction===this.selectedFaction&&this.options.freebandLimit===this.freebandLimit}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["freeband-setup"]],inputs:{selectedOptions:"selectedOptions"},outputs:{onOptionsSet:"onOptionsSet"},features:[e.TTD],decls:12,vars:6,consts:[["id","content"],[2,"width","calc(100% - 2rem)"],["placeholder","Faction*",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","min","1","max","500","placeholder","Freeband Limit*",3,"ngModel","ngModelChange","focus"],["limitInput",""],[3,"ngModel","disabled","ngModelChange"],["mat-raised-button","",1,"mat-accent",3,"disabled","click"],[3,"value"]],template:function(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.NdJ("valueChange",function(l){return i.selectedFaction=l}),e.YNc(3,Xe,2,2,"mat-option",3),e.qZA()(),e.TgZ(4,"mat-form-field",1)(5,"input",4,5),e.NdJ("ngModelChange",function(l){return i.freebandLimit=l})("focus",function(){return e.CHM(o),e.MAs(6).select()}),e.qZA()(),e.TgZ(7,"mat-checkbox",6),e.NdJ("ngModelChange",function(l){return i.altLeader=l}),e._uU(8,"Enable Alternate Leader Rule"),e.qZA(),e.TgZ(9,"div")(10,"button",7),e.NdJ("click",function(){return i.optionsSet()}),e._uU(11,"Update Settings"),e.qZA()()()}2&t&&(e.xp6(2),e.Q6J("value",i.selectedFaction),e.xp6(1),e.Q6J("ngForOf",i.factions),e.xp6(2),e.Q6J("ngModel",i.freebandLimit),e.xp6(2),e.Q6J("ngModel",i.altLeader)("disabled",i.disallowedAltLeadersFactions.indexOf(i.selectedFaction)>-1),e.xp6(3),e.Q6J("disabled",i.updateDisabled()))},directives:[j.KE,N.gD,y.sg,M.ey,Q.Nt,g.qQ,g.Fd,g.wV,g.Fj,g.JJ,g.On,q.oG,A.lW],styles:["#content[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),n})();var F=h(2640);function tt(n,a){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function it(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-radio-button",14),e.NdJ("change",function(o){const l=e.CHM(t).index;return e.oxw(2).changeLeaderOption(o,"melee",l)}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.Q6J("checked",t.altSelected)("value",t),e.xp6(1),e.AsE(" ",t.name," - d",t.rating," ")}}function nt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-radio-button",14),e.NdJ("change",function(o){const l=e.CHM(t).index;return e.oxw(2).changeLeaderOption(o,"range",l)}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.Q6J("checked",t.altSelected)("value",t),e.xp6(1),e.AsE(" ",t.name," - d",t.rating," ")}}function ot(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-radio-button",15),e.NdJ("change",function(o){return e.CHM(t),e.oxw(2).changeLeaderOption(o,"casting")}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" Magic - d",t.model.stats.casting.rating," ")}}function at(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"h1"),e._uU(2,"Alt Leader Options"),e.qZA(),e.TgZ(3,"mat-radio-group"),e.YNc(4,it,2,4,"mat-radio-button",12),e.YNc(5,nt,2,4,"mat-radio-button",12),e.YNc(6,ot,2,1,"mat-radio-button",13),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.model.stats.melee),e.xp6(1),e.Q6J("ngForOf",t.model.stats.range),e.xp6(1),e.Q6J("ngIf",t.model.stats.casting)}}function st(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-radio-button",14),e.NdJ("change",function(o){return e.CHM(t),e.oxw(2).changeOption(o)}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.Q6J("checked",t.selected)("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function lt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"h1"),e._uU(2,"Options"),e.qZA(),e.TgZ(3,"mat-radio-group"),e.YNc(4,st,2,3,"mat-radio-button",12),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.model.stats.options)}}function rt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-checkbox",17),e.NdJ("change",function(o){return e.CHM(t).$implicit.selected=o.checked}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.Q6J("checked",t.selected),e.xp6(1),e.AsE("",t.name,", Cost: ",t.cost,"")}}function dt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"h1"),e._uU(2,"Veteran"),e.qZA(),e.YNc(3,rt,2,3,"mat-checkbox",16),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.model.stats.veteran)}}function ct(n,a){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ut(n,a){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"br"),e.TgZ(2,"mat-form-field")(3,"mat-select",18),e.NdJ("selectionChange",function(){return e.CHM(t),e.oxw().addAdvancement()})("valueChange",function(o){return e.CHM(t).$implicit.name=o}),e.YNc(4,ct,2,2,"mat-option",5),e.qZA()(),e.TgZ(5,"mat-form-field")(6,"input",19),e.NdJ("ngModelChange",function(o){return e.CHM(t).$implicit.cost=o}),e.qZA()(),e.TgZ(7,"button",7),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().removeAdvancement(s)}),e._uU(8,"Remove"),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(3),e.Q6J("value",t.name),e.xp6(1),e.Q6J("ngForOf",i.advancements),e.xp6(2),e.Q6J("ngModel",t.cost)}}function mt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",21),e.NdJ("onSelectionChange",function(){const s=e.CHM(t).$implicit,l=e.oxw().index;return e.oxw().addInjury(s,l)}),e._uU(1),e.qZA()}if(2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function ht(n,a){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"br"),e.TgZ(2,"mat-form-field")(3,"mat-select",11),e.YNc(4,mt,2,2,"mat-option",20),e.qZA()(),e.TgZ(5,"button",7),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().removeInjuries(s)}),e._uU(6,"Remove"),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw();e.xp6(3),e.Q6J("value",t),e.xp6(1),e.Q6J("ngForOf",i.injuries)}}function pt(n,a){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name)}}function _t(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"mat-select",22),e.NdJ("valueChange",function(o){e.CHM(t);const s=e.oxw().index;return e.oxw().modelItems[s]=o})("selectionChange",function(){e.CHM(t);const o=e.oxw().index;return e.oxw().addItem(o)}),e.YNc(2,pt,2,2,"mat-option",5),e.qZA()()}if(2&n){const t=e.oxw().index,i=e.oxw();e.xp6(1),e.Q6J("value",i.modelItems[t]),e.xp6(1),e.Q6J("ngForOf",i.items)}}function ft(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field")(1,"input",19),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw().index;return e.oxw().modelItems[s].cost=o}),e.qZA()()}if(2&n){const t=e.oxw().index,i=e.oxw();e.xp6(1),e.Q6J("ngModel",i.modelItems[t].cost)}}function gt(n,a){if(1&n){const t=e.EpF();e.ynx(0),e._UZ(1,"br"),e.YNc(2,_t,3,2,"mat-form-field",6),e.YNc(3,ft,2,1,"mat-form-field",6),e.TgZ(4,"button",7),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().removeItem(s)}),e._uU(5,"Remove"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.modelItems),e.xp6(1),e.Q6J("ngIf",t.modelItems)}}const vt=function(){return["M","F"]};let bt=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.advancements=["MAR","RAR","CAR","DISC","SPD","Rise of a Hero",...F.JE,...F.nA,...F.sh].sort(),this.injuries=[...F.JE,"DISC","SPD","Reluctant","Hate[faction]"].sort(),this.items=[...F.VS,...F.c1].sort((o,s)=>o.name.toLowerCase()>s.name.toLowerCase()?1:o.name.toLowerCase()<s.name.toLowerCase()?-1:0),this.modelAdvancements=[],this.modelInjuries=[],this.modelItems=[],this.model=this.data.model,this.originalModelStats=JSON.parse(JSON.stringify(this.model.stats)),"advancements"in this.model.stats&&(this.modelAdvancements=this.model.stats.advancements),"injuries"in this.model.stats&&(this.modelInjuries=this.model.stats.injuries),"items"in this.model.stats&&(this.modelItems=this.model.stats.items)}ngOnInit(){}ngOnDestroy(){var t,i,o;"advancements"in this.model.stats&&(this.model.stats.advancements=null===(t=this.model.stats.advancements)||void 0===t?void 0:t.filter(s=>s)),"injuries"in this.model.stats&&(this.model.stats.injuries=null===(i=this.model.stats.injuries)||void 0===i?void 0:i.filter(s=>s)),"items"in this.model.stats&&(this.model.stats.items=null===(o=this.model.stats.items)||void 0===o?void 0:o.filter(s=>s))}addAdvancement(){this.model.stats.advancements=this.modelAdvancements}addItem(t){if(!this.modelItems)return;const i=this.modelItems[t];"items"in this.model.stats||(this.model.stats.items=[]),this.model.stats.items&&i&&(this.model.stats.items[t]=i)}addInjury(t,i){"injuries"in this.model.stats||(this.model.stats.injuries=[]),this.model.stats.injuries&&t&&(this.model.stats.injuries[i]=t)}cancel(){this.model.stats=JSON.parse(JSON.stringify(this.originalModelStats)),this.dialogRef.close()}changeLeaderOption(t,i,o){this.model.stats.melee&&this.model.stats.melee.map((s,l)=>s.altSelected="melee"===i&&o===l),this.model.stats.range&&this.model.stats.range.map((s,l)=>s.altSelected="range"===i&&o===l),this.model.stats.casting&&(this.model.stats.casting.altSelected="casting"===i)}changeOption(t){var i;null===(i=this.model.stats.options)||void 0===i||i.map(o=>o.selected=t.value.name===o.name)}removeAdvancement(t){this.modelAdvancements&&this.modelAdvancements.splice(this.modelAdvancements.indexOf(t),1)}removeInjuries(t){this.modelInjuries&&this.modelInjuries.splice(this.modelInjuries.indexOf(t),1)}removeItem(t){this.modelItems&&this.modelItems.splice(this.modelItems.indexOf(t),1)}updateAdvancementCount(){this.modelAdvancements&&this.modelAdvancements.push({name:void 0,cost:3})}updateInjuryCount(){this.modelInjuries&&this.modelInjuries.push(void 0)}updateItemCount(){this.modelItems&&this.modelItems.push({name:void 0,cost:void 0})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D),e.Y36(oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-model"]],decls:33,vars:12,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"width","100%"],["matInput","","type","text","placeholder","Character Name",3,"ngModel","ngModelChange"],["placeholder","Gender",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-button","",1,"mat-raised-button",3,"click"],[4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",1,"mat-raised-button",3,"mat-dialog-close"],[3,"value"],[3,"checked","value","change",4,"ngFor","ngForOf"],[3,"change",4,"ngIf"],[3,"checked","value","change"],[3,"change"],[3,"checked","change",4,"ngFor","ngForOf"],[3,"checked","change"],[3,"value","selectionChange","valueChange"],["matInput","","type","number","placeholder","Cost",3,"ngModel","ngModelChange"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"],[3,"value","valueChange","selectionChange"]],template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1)(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(s){return i.model.characterName=s}),e.qZA()(),e.TgZ(5,"mat-form-field")(6,"mat-select",4),e.NdJ("valueChange",function(s){return i.model.gender=s}),e.YNc(7,tt,2,2,"mat-option",5),e.qZA()(),e.YNc(8,at,7,3,"ng-container",6),e.YNc(9,lt,5,1,"ng-container",6),e.YNc(10,dt,4,1,"ng-container",6),e._UZ(11,"br")(12,"br"),e.TgZ(13,"button",7),e.NdJ("click",function(){return i.updateAdvancementCount()}),e._uU(14,"Add advancements"),e.qZA(),e.YNc(15,ut,9,3,"ng-container",8),e._UZ(16,"br")(17,"br"),e.TgZ(18,"button",7),e.NdJ("click",function(){return i.updateInjuryCount()}),e._uU(19,"Add injury"),e.qZA(),e.YNc(20,ht,7,2,"ng-container",8),e._UZ(21,"br")(22,"br"),e.TgZ(23,"button",7),e.NdJ("click",function(){return i.updateItemCount()}),e._uU(24,"Add item"),e.qZA(),e.YNc(25,gt,6,2,"ng-container",8),e._UZ(26,"br")(27,"br"),e.qZA(),e.TgZ(28,"div",9)(29,"button",10),e._uU(30,"Update"),e.qZA(),e.TgZ(31,"button",7),e.NdJ("click",function(){return i.cancel()}),e._uU(32,"Cancel"),e.qZA()()),2&t&&(e.xp6(1),e.hij("Edit Model: ",i.model.displayName,""),e.xp6(3),e.Q6J("ngModel",i.model.characterName),e.xp6(2),e.Q6J("value",i.model.gender),e.xp6(1),e.Q6J("ngForOf",e.DdM(11,vt)),e.xp6(1),e.Q6J("ngIf",i.data.altLeader),e.xp6(1),e.Q6J("ngIf",null==i.model.stats?null:i.model.stats.options),e.xp6(1),e.Q6J("ngIf",null==i.model.stats?null:i.model.stats.veteran),e.xp6(5),e.Q6J("ngForOf",i.modelAdvancements),e.xp6(5),e.Q6J("ngForOf",i.modelInjuries),e.xp6(5),e.Q6J("ngForOf",i.modelItems),e.xp6(4),e.Q6J("mat-dialog-close",i.model))},directives:[$,K,j.KE,Q.Nt,g.Fj,g.JJ,g.On,N.gD,y.sg,M.ey,y.O5,he,pe,q.oG,A.lW,g.wV,W,se],encapsulation:2}),n})(),Ct=(()=>{class n{transform(t,i,o=", "){return t.map(s=>`${s[i]}`).join(o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"complexlist",type:n,pure:!0}),n})(),yt=(()=>{class n{transform(t,i=", "){return t.join(i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"simplelist",type:n,pure:!0}),n})();function Mt(n,a){if(1&n&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.cQ8("title","",t.displayName," - ",t.stats.type," - ",t.value,""),e.Q6J("value",t),e.xp6(1),e.lnq("",t.displayName," - ",t.stats.type," - ",t.value,"")}}function xt(n,a){if(1&n&&(e.TgZ(0,"mat-optgroup",7),e.YNc(1,Mt,2,7,"mat-option",8),e.qZA()),2&n){const t=a.$implicit,i=e.oxw();e.Q6J("label",t),e.xp6(1),e.Q6J("ngForOf",i.model_grouping[t])}}function At(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().modelRemoved()}),e._uU(1,"Remove model"),e.qZA()}}function Tt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().openEditWindow()}),e._uU(1,"Edit model"),e.qZA()}}function Zt(n,a){if(1&n&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("\xa0:(",t.model.characterName,")")}}function kt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("(",t.model.characterName,")")}}function Ft(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.model.stats.shield)}}function St(n,a){if(1&n&&(e.TgZ(0,"div")(1,"span",12),e._uU(2,"Morale/Fear Bonus: "),e.qZA(),e._uU(3),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.model.stats.moraleBonus)}}function Dt(n,a){1&n&&(e.TgZ(0,"div",14),e._uU(1,"\xa0"),e.qZA())}function Rt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("\xa0+",t.ratingBonus,"")}}function Ot(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("\xa0+",t.damageBonus,"")}}function wt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"MAR: "),e.qZA(),e._uU(4),e.YNc(5,Rt,2,1,"span",6),e.qZA(),e.TgZ(6,"div",19)(7,"span",12),e._uU(8,"Weapon: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div")(11,"span",12),e._uU(12,"Dmg: "),e.qZA(),e._uU(13),e.YNc(14,Ot,2,1,"span",6),e.qZA()()),2&n){const t=a.$implicit;e.xp6(4),e.hij("d",t.rating,""),e.xp6(1),e.Q6J("ngIf",t.ratingBonus&&t.ratingBonus>0),e.xp6(4),e.AsE("",t.name," ",t.abilityList,""),e.xp6(4),e.hij("d",t.damage,""),e.xp6(1),e.Q6J("ngIf",t.damageBonus&&t.damageBonus>0)}}function Lt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("\xa0+",t.ratingBonus,"")}}function It(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("\xa0+",t.damageBonus,"")}}function qt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"RAR: "),e.qZA(),e._uU(4),e.YNc(5,Lt,2,1,"span",6),e.qZA(),e.TgZ(6,"div",19)(7,"span",12),e._uU(8,"Weapon: "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"div")(11,"span",12),e._uU(12,"Dmg: "),e.qZA(),e._uU(13),e.YNc(14,It,2,1,"span",6),e.qZA()()),2&n){const t=a.$implicit;e.xp6(4),e.hij("d",t.rating,""),e.xp6(1),e.Q6J("ngIf",t.ratingBonus&&t.ratingBonus>0),e.xp6(4),e.xDo("",t.name," ",t.abilityList," ",t.distance,'"-',2*t.distance,'"-',3*t.distance,'"'),e.xp6(4),e.hij("d",t.damage,""),e.xp6(1),e.Q6J("ngIf",t.damageBonus&&t.damageBonus>0)}}function Bt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("\xa0+",t.model.stats.casting.ratingBonus,"")}}function Et(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"CAR: "),e.qZA(),e._uU(4),e.YNc(5,Bt,2,1,"span",6),e.qZA(),e.TgZ(6,"div")(7,"span",12),e._uU(8,"Power: "),e.qZA(),e._uU(9),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.AsE("",t.model.stats.casting.name," - d",t.model.stats.casting.rating,""),e.xp6(1),e.Q6J("ngIf",t.model.stats.casting.ratingBonus&&t.model.stats.casting.ratingBonus>0),e.xp6(4),e.Oqu(t.model.stats.casting.power)}}function Ut(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"Performance: "),e.qZA(),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.AsE("",t.model.stats.performance.name," - d",t.model.stats.performance.rating,"")}}function Nt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij("+",t.model.stats.moraleBonus,"")}}function Jt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"Focus: "),e.qZA(),e._uU(4),e.YNc(5,Nt,2,1,"span",6),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.AsE("",t.model.stats.focus.name," - d",t.model.stats.focus.rating,""),e.xp6(1),e.Q6J("ngIf",t.model.stats.moraleBonus&&t.model.stats.moraleBonus>0)}}function Pt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"Skills:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div")(6,"span",12),e._uU(7,"Skill Bonus:"),e.qZA(),e._uU(8),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.model.stats.skillList,""),e.xp6(4),e.hij(" ",t.model.stats.skillBonus,"")}}function jt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"Talents:"),e.qZA(),e._uU(4),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.model.stats.talentList,"")}}function Qt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"Items:"),e.qZA(),e._uU(4),e.ALo(5,"complexlist"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.xi3(5,1,t.model.stats.items,"name"),"")}}function Yt(n,a){if(1&n&&(e.TgZ(0,"div",11)(1,"div")(2,"span",12),e._uU(3,"Injuries:"),e.qZA(),e._uU(4),e.ALo(5,"simplelist"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,1,t.model.stats.injuries),"")}}function Ht(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",11)(2,"div")(3,"span",12),e._uU(4,"Model: "),e.qZA(),e._uU(5),e.YNc(6,Zt,2,1,"span",13),e.qZA(),e.TgZ(7,"div",14)(8,"span",12),e._uU(9,"Name: "),e.qZA(),e.YNc(10,kt,2,1,"span",6),e.qZA(),e.TgZ(11,"div",15)(12,"span",12),e._uU(13,"Type: "),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"div",15)(16,"span",12),e._uU(17,"Value: "),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"div",14)(20,"span",12),e._uU(21,"AP: "),e.qZA()()(),e.TgZ(22,"div",11)(23,"div")(24,"span",12),e._uU(25,"SPD: "),e.qZA(),e._uU(26),e.qZA(),e.TgZ(27,"div")(28,"span",12),e._uU(29,"DEF: "),e.qZA(),e._uU(30),e.YNc(31,Ft,2,1,"span",6),e.qZA(),e.TgZ(32,"div")(33,"span",12),e._uU(34,"AV: "),e.qZA(),e._uU(35),e.qZA(),e.TgZ(36,"div")(37,"span",12),e._uU(38,"LP: "),e.qZA(),e._uU(39),e.qZA(),e.TgZ(40,"div")(41,"span",12),e._uU(42,"DISC: "),e.qZA(),e._uU(43),e.qZA(),e.YNc(44,St,4,1,"div",6),e.YNc(45,Dt,2,0,"div",16),e.qZA(),e.YNc(46,wt,15,6,"div",17),e.YNc(47,qt,15,9,"div",17),e.YNc(48,Et,10,4,"div",18),e.YNc(49,Ut,5,2,"div",18),e.YNc(50,Jt,6,3,"div",18),e.TgZ(51,"div",11)(52,"div")(53,"span",12),e._uU(54,"AGL: "),e.qZA(),e._uU(55),e.qZA(),e.TgZ(56,"div")(57,"span",12),e._uU(58,"DEX: "),e.qZA(),e._uU(59),e.qZA(),e.TgZ(60,"div")(61,"span",12),e._uU(62,"END: "),e.qZA(),e._uU(63),e.qZA(),e.TgZ(64,"div")(65,"span",12),e._uU(66,"KNW: "),e.qZA(),e._uU(67),e.qZA(),e.TgZ(68,"div")(69,"span",12),e._uU(70,"SPR: "),e.qZA(),e._uU(71),e.qZA(),e.TgZ(72,"div")(73,"span",12),e._uU(74,"STR: "),e.qZA(),e._uU(75),e.qZA()(),e.YNc(76,Pt,9,2,"div",18),e.YNc(77,jt,5,1,"div",18),e.YNc(78,Qt,6,4,"div",18),e.YNc(79,Yt,6,3,"div",18),e.BQk()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.model.displayName),e.xp6(1),e.Q6J("ngIf",t.model.characterName),e.xp6(4),e.Q6J("ngIf",t.model.characterName),e.xp6(4),e.Oqu(t.model.stats.type),e.xp6(4),e.Oqu(t.model.stats.modelValue),e.xp6(8),e.Oqu(t.model.stats.speed),e.xp6(4),e.Oqu(t.model.stats.defense),e.xp6(1),e.Q6J("ngIf",t.model.stats.shield),e.xp6(4),e.Oqu(t.model.stats.armor),e.xp6(4),e.Oqu(t.model.stats.lifePoints),e.xp6(4),e.hij("d",t.model.stats.discipline,""),e.xp6(1),e.Q6J("ngIf",t.model.stats.moraleBonus&&t.model.stats.moraleBonus>0),e.xp6(1),e.Q6J("ngIf",0==t.model.stats.moraleBonus),e.xp6(1),e.Q6J("ngForOf",t.model.stats.melee),e.xp6(1),e.Q6J("ngForOf",t.model.stats.range),e.xp6(1),e.Q6J("ngIf",t.model.stats.casting),e.xp6(1),e.Q6J("ngIf",t.model.stats.performance),e.xp6(1),e.Q6J("ngIf",t.model.stats.focus),e.xp6(5),e.hij("d",null==t.model.stats.abilities?null:t.model.stats.abilities.agility,""),e.xp6(4),e.hij("d",null==t.model.stats.abilities?null:t.model.stats.abilities.dexterity,""),e.xp6(4),e.hij("d",null==t.model.stats.abilities?null:t.model.stats.abilities.endurance,""),e.xp6(4),e.hij("d",null==t.model.stats.abilities?null:t.model.stats.abilities.knowledge,""),e.xp6(4),e.hij("d",null==t.model.stats.abilities?null:t.model.stats.abilities.spirit,""),e.xp6(4),e.hij("d",null==t.model.stats.abilities?null:t.model.stats.abilities.strength,""),e.xp6(1),e.Q6J("ngIf",t.model.stats.skillList),e.xp6(1),e.Q6J("ngIf",t.model.stats.talentList),e.xp6(1),e.Q6J("ngIf",t.model.stats.items),e.xp6(1),e.Q6J("ngIf",t.model.stats.injuries)}}const Gt=function(n){return{noPrint:n}};let Vt=(()=>{class n{constructor(t,i){this.dialog=t,this.modelSelectorService=i,this.altLeader=!1,this.componentId=void 0,this.type="",this.selectedModel=void 0,this.onModelRemoved=new e.vpe,this.onModelSelected=new e.vpe,this.factionModels=ge.k,this.model_factions=[],this.originalModel=void 0,this.selected=void 0,this.disallowedAltLeaders=["Duelist","Black Thorn","Bladerider First","Bladerider","Shadow Hunter","High Questor of Tahnar","High Questor of Vidunar","High Questor of Barek","High Questor of Glareyn","High Questor of Vasilar","High Questor of Valia","Questing Knight of Tahnar","Questing Knight of Vidunar","Questing Knight of Barek","Questing Knight of Glareyn","Questing Knight of Sylvia","Questing Knight of Vasilar","Apprentice Knight of Tahnar","Apprentice Knight of Vidunar","Apprentice Knight of Barek","Dark Herald","Kor-Khan"],this.disallowedAltLeadersFactions=["Darkgrove Demons","Demons of Karelon","Koronnan Moonsworn","Ravenblade Mercenaries"],this.models=[],this.model_grouping={},this.model_factions=[]}ngOnChanges(t){var i,o,s,l,u,d,m,f,b,T,S,Z,O;if(("altLeader"in t||"faction"in t)&&this.faction){if(this.model=void 0,this.models=[],this.model_grouping={},this.model_factions=[],this.altLeader&&!this.disallowedAltLeadersFactions.includes(this.faction)){const p=JSON.parse(JSON.stringify(this.factionModels));for(let _ of p){let x,r=Object.assign({},_);if((null===(i=r.stats.talents)||void 0===i?void 0:i.includes("Familiar"))||(r.trustedFactions&&r.trustedFactions.includes(this.faction)?(x="Ally[Trusted]","Lightbringer"===r.name&&(x="Ally[Trusted/Independent]")):r.primaryFaction.includes(this.faction)||(x="Ally[Independent]"),x&&(r.stats.talents?r.stats.talents.includes(x)||r.stats.talents.push(x):r.stats.talents=[x])),r.factions.includes(this.faction))if("Leader"!==this.type||"Standard"!==r.type&&"Caster"!==r.type||"Hero"!==r.stats.type||!(null===(o=r.stats.talents)||void 0===o?void 0:o.every(C=>!["Animal","Demon","Feral","Warbeast","Undead"].includes(C)))||!(null===(s=r.stats.talents)||void 0===s?void 0:s.every(C=>!C.includes("Ally")))||this.disallowedAltLeaders.includes(r.name))"Standard"===this.type&&"Leader"===r.type&&this.disallowedAltLeaders.indexOf(r.name)<0?(r.stats.talents=null===(l=r.stats.talents)||void 0===l?void 0:l.filter(C=>"Leader"!==C),r.stats.melee=null===(u=r.stats.melee)||void 0===u?void 0:u.map(C=>(C.rating-=2,C)),r.stats.discipline-=2,r.value-=7,r.type="Standard",this.models.push(r)):r.type===this.type&&this.models.push(r);else{r.stats.talents.push("Leader"),r.stats.melee&&(r.stats.melee[0].altSelected=!0),8===r.stats.discipline?(r.stats.discipline+=4,r.value+=8):6===r.stats.discipline?(r.stats.discipline+=6,r.value+=9):(r.stats.discipline+=2,r.value+=7);for(let C of r.stats.talents)["Die Hard","Dodge","Wraith"].includes(C)&&(r.value+=1),"Sergeant"===C&&(r.value-=2);r.type="Leader",this.models.push(r)}}}else this.models=this.factionModels.filter(p=>this.faction&&p.type===this.type&&p.factions.includes(this.faction)).map(p=>{var _;if(void 0===this.faction)return p;let r;return(null===(_=p.stats.talents)||void 0===_?void 0:_.includes("Familiar"))||(p.trustedFactions&&p.trustedFactions.includes(this.faction)?(r="Ally[Trusted]","Lightbringer"===p.name&&(r="Ally[Trusted/Independent]")):p.primaryFaction.includes(this.faction)||(r="Ally[Independent]"),r&&(p.stats.talents?p.stats.talents.includes(r)||p.stats.talents.push(r):p.stats.talents=[r])),p});this.models.forEach(p=>{for(let _ of p.primaryFaction)_ in this.model_grouping||(this.model_grouping[_]=[]),this.model_grouping[_].push(p)});for(let p in this.model_grouping)this.model_factions.push(p),this.model_grouping[p].sort((_,r)=>_.stats.type===r.stats.type?_.name<r.name?-1:_.name>r.name?1:0:"Hero"===_.stats.type?-1:1);this.model_factions.sort((p,_)=>p===this.faction?-1:_===this.faction||p>_?1:-1)}if("selectedModel"in t&&this.selectedModel&&!("component_id"in this.selectedModel))try{if(this.selected=this.models.filter(p=>{var _;return p.displayName===(null===(_=this.selectedModel)||void 0===_?void 0:_.displayName)})[0],!this.selected)throw"";this.selected.gender=this.selectedModel.gender,"characterName"in this.selectedModel&&this.selectedModel.characterName&&(this.selected.characterName=this.selectedModel.characterName),this.selectedModel.stats&&((null===(d=this.selectedModel.stats)||void 0===d?void 0:d.advancements)&&(this.selected.stats.advancements=this.selectedModel.stats.advancements),this.selected.stats.casting&&(null===(m=this.selectedModel.stats)||void 0===m?void 0:m.casting)&&(this.selected.stats.casting.altSelected=this.selectedModel.stats.casting.altSelected),(null===(f=this.selectedModel.stats)||void 0===f?void 0:f.injuries)&&(this.selected.stats.injuries=this.selectedModel.stats.injuries),(null===(b=this.selectedModel.stats)||void 0===b?void 0:b.items)&&(this.selected.stats.items=this.selectedModel.stats.items),this.selected.stats.melee&&(null===(T=this.selectedModel.stats)||void 0===T?void 0:T.melee)&&this.selected.stats.melee.forEach((p,_)=>{var r;return p.altSelected=!(!(null===(r=this.selectedModel)||void 0===r?void 0:r.stats.melee)||!this.selectedModel.stats.melee[_])&&this.selectedModel.stats.melee[_].altSelected}),(null===(S=this.selectedModel.stats)||void 0===S?void 0:S.options)&&(this.selected.stats.options=this.selectedModel.stats.options),this.selected.stats.range&&(null===(Z=this.selectedModel.stats)||void 0===Z?void 0:Z.range)&&this.selected.stats.range.forEach((p,_)=>{var r;return p.altSelected=!(!(null===(r=this.selectedModel)||void 0===r?void 0:r.stats.range)||!this.selectedModel.stats.range[_])&&this.selectedModel.stats.range[_].altSelected}),(null===(O=this.selectedModel.stats)||void 0===O?void 0:O.veteran)&&(this.selected.stats.veteran=this.selectedModel.stats.veteran)),this.modelSelected()}catch(p){console.error(`Issue finding selected model ${this.selectedModel.displayName}`,p)}}modelRemoved(){this.onModelRemoved.emit(this.componentId)}modelSelected(t){this.model=void 0,this.selected?(this.originalModel=JSON.parse(JSON.stringify(this.selected)),this.updateModelStats(this.originalModel)):this.onModelSelected.emit({component_id:this.componentId})}openEditWindow(){this.dialog.open(bt,{data:{model:this.originalModel,altLeader:this.altLeader}}).afterClosed().subscribe(i=>{i&&this.updateModelStats(i)})}updateModelStats(t){var i,o,s,l,u;!t||(this.model=JSON.parse(JSON.stringify(t)),this.model&&((null===(i=this.model.stats)||void 0===i?void 0:i.veteran)&&(this.model.value=this.model.stats.veteran.reduce((d,m)=>m.selected?d+m.cost:d,t.value)),(null===(o=this.model.stats.melee)||void 0===o?void 0:o.some(d=>d.altSelected))&&((null===(s=this.model.stats.talents)||void 0===s?void 0:s.includes("Shield Bash"))&&(this.model.value+=1),(null===(l=this.model.stats.melee)||void 0===l?void 0:l.some(d=>{var m,f,b;return d.altSelected&&((null===(f=null===(m=F.vx.find(T=>T.name===d.name))||void 0===m?void 0:m.abilities)||void 0===f?void 0:f.includes("te"))||(null===(b=d.abilities)||void 0===b?void 0:b.includes("te")))}))&&(this.model.value+=1)),(null===(u=this.model.stats)||void 0===u?void 0:u.items)&&(this.model.value=this.model.stats.items.reduce((d,m)=>m.cost+d,t.value)),this.model.stats=Object.assign(this.model.stats,this.modelSelectorService.calculateStats(t.stats,this.model.value)),this.model.component_id=this.componentId,this.onModelSelected.emit(this.model)))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U),e.Y36(_e.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["model-selector"]],inputs:{altLeader:"altLeader",componentId:"componentId",faction:"faction",type:"type",selectedModel:"selectedModel"},outputs:{onModelRemoved:"onModelRemoved",onModelSelected:"onModelSelected"},features:[e.TTD],decls:11,vars:12,consts:[[1,"modelDisplay",3,"ngClass"],[1,"noPrint","modelDisplayButtons"],[3,"placeholder","value","title","selectionChange","valueChange"],["value",""],[3,"label",4,"ngFor","ngForOf"],["mat-raised-button","","class","mat-accent",3,"click",4,"ngIf"],[4,"ngIf"],[3,"label"],[3,"value","title",4,"ngFor","ngForOf"],[3,"value","title"],["mat-raised-button","",1,"mat-accent",3,"click"],[1,"modelDisplayRow"],[1,"bold-text"],["class","noPrint",4,"ngIf"],[1,"printOnly"],[1,"noPrint"],["class","printOnly",4,"ngIf"],["class","modelDisplayRow",4,"ngFor","ngForOf"],["class","modelDisplayRow",4,"ngIf"],[1,"larger"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field")(3,"mat-select",2),e.NdJ("selectionChange",function(s){return i.modelSelected(s)})("valueChange",function(s){return i.selected=s}),e.TgZ(4,"mat-option",3),e._uU(5,"None"),e.qZA(),e.YNc(6,xt,2,2,"mat-optgroup",4),e.qZA()(),e.TgZ(7,"div"),e.YNc(8,At,2,0,"button",5),e.YNc(9,Tt,2,0,"button",5),e.qZA()(),e.YNc(10,Ht,80,28,"ng-container",6),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(10,Gt,!i.model)),e.xp6(3),e.cQ8("title","",null==i.selected?null:i.selected.displayName," - ",null==i.selected||null==i.selected.stats?null:i.selected.stats.type," - ",null==i.selected?null:i.selected.value,""),e.Q6J("placeholder","Standard"!==i.type?i.type:"Model")("value",i.selected),e.xp6(3),e.Q6J("ngForOf",i.model_factions),e.xp6(2),e.Q6J("ngIf","Standard"===i.type),e.xp6(1),e.Q6J("ngIf",i.model),e.xp6(1),e.Q6J("ngIf",i.model))},directives:[y.mk,j.KE,N.gD,M.ey,y.sg,M.Nv,y.O5,A.lW],pipes:[Ct,yt],styles:[".modelDisplay[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column}.modelDisplay[_ngcontent-%COMP%]   .modelDisplayButtons[_ngcontent-%COMP%]{align-items:flex-start;box-sizing:border-box;display:flex;flex-direction:row;place-content:flex-start space-between}.modelDisplay[_ngcontent-%COMP%]   .modelDisplayRow[_ngcontent-%COMP%]{align-items:stretch;box-sizing:border-box;display:flex;flex-direction:row;max-height:100%;place-content:stretch space-between}@media screen{.modelDisplay[_ngcontent-%COMP%]{margin-bottom:1rem}.modelDisplay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#000}.modelDisplay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(1){background-color:inherit!important;border-bottom:1px solid black}.modelDisplay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(odd){background-color:#eee;padding:.25rem;border-bottom:1px solid black}.modelDisplay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(even){background-color:#aaa;padding:.25rem;border-bottom:1px solid black}}@media print{.modelDisplay[_ngcontent-%COMP%]{margin-bottom:1.5rem;page-break-inside:avoid;break-inside:avoid}.modelDisplay[_ngcontent-%COMP%]   div.modelDisplayRow[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;border:1px solid black}.modelDisplay[_ngcontent-%COMP%]   div.modelDisplayRow[_ngcontent-%COMP%]   div.larger[_ngcontent-%COMP%]{flex:4 .5%}}"]}),n})();function zt(n,a){if(1&n&&(e.TgZ(0,"div",16)(1,"span"),e._uU(2),e.qZA()()),2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t)}}function $t(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"model-selector",17),e.NdJ("onModelSelected",function(o){return e.CHM(t),e.oxw(2).modelSelected(o)})("onModelRemoved",function(o){return e.CHM(t),e.oxw(2).removeModel(o)}),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("faction",i.faction)("altLeader",i.altLeader)("selectedModel",i.models[t])("componentId",t)}}function Kt(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"div")(3,"span",4),e._uU(4,"Freeband Name:"),e.qZA(),e.TgZ(5,"span")(6,"span",5),e._uU(7,"Base Value: "),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"span")(10,"span",5),e._uU(11,"Total Value: "),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"span")(14,"span",5),e._uU(15,"Break Value: "),e.qZA(),e._uU(16),e.qZA(),e.TgZ(17,"span",6)(18,"span",5),e._uU(19,"Hero Total: "),e.qZA(),e._uU(20),e.qZA(),e.TgZ(21,"span",6)(22,"span",5),e._uU(23,"Follower Total: "),e.qZA(),e._uU(24),e.qZA(),e.TgZ(25,"span")(26,"span",5),e._uU(27,"Scouting Points: "),e.qZA(),e._uU(28),e.qZA(),e.TgZ(29,"span",7),e._uU(30,"Gold:"),e.qZA(),e.TgZ(31,"span",8),e._uU(32,"Notes:"),e.qZA()()(),e.TgZ(33,"div",9)(34,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().print()}),e._uU(35,"Print"),e.qZA(),e.TgZ(36,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().downloadFreeband()}),e._uU(37,"Download"),e.qZA(),e.TgZ(38,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().loadFreeband()}),e._uU(39,"Load"),e.qZA()(),e.YNc(40,zt,3,1,"div",11),e.TgZ(41,"model-selector",12),e.NdJ("onModelSelected",function(o){return e.CHM(t),e.oxw().modelSelected(o)}),e.qZA(),e.TgZ(42,"model-selector",13),e.NdJ("onModelSelected",function(o){return e.CHM(t),e.oxw().modelSelected(o)}),e.qZA(),e.YNc(43,$t,2,4,"ng-container",14),e.TgZ(44,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().addModel()}),e._uU(45,"Add Model"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.freebandBaseValue),e.xp6(4),e.Oqu(t.freebandTotalValue),e.xp6(4),e.Oqu(t.breakValue),e.xp6(4),e.Oqu(t.completeHeroCount),e.xp6(4),e.Oqu(t.completeFollowerCount),e.xp6(4),e.Oqu(t.scoutingPoints),e.xp6(12),e.Q6J("ngForOf",t.errorMessages),e.xp6(1),e.Q6J("faction",t.faction)("altLeader",t.altLeader)("selectedModel",t.models[t.leaderId])("componentId",t.leaderId),e.xp6(1),e.Q6J("faction",t.faction)("selectedModel",t.models[t.casterId])("componentId",t.casterId),e.xp6(1),e.Q6J("ngForOf",t.extraModels)}}function Wt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().loadFreeband()}),e._uU(2,"Load"),e.qZA()(),e.TgZ(3,"div",6)(4,"p"),e._uU(5,"Start by selecting the values above so that you can begin building your freeband."),e.qZA(),e.TgZ(6,"mat-list")(7,"mat-list-item")(8,"h1",19),e._uU(9,"Faction - required"),e.qZA(),e.TgZ(10,"p",19),e._uU(11,"Choose from any of the currently available factions"),e.qZA()(),e.TgZ(12,"mat-list-item")(13,"h1",19),e._uU(14,"Limit - required"),e.qZA(),e.TgZ(15,"p",19),e._uU(16,"The maximum size of the freeband based on the total value of the models picked."),e.qZA()(),e.TgZ(17,"mat-list-item")(18,"h1",19),e._uU(19,"Alternate Leader"),e.TgZ(20,"sup"),e._uU(21,"1"),e.qZA()(),e.TgZ(22,"p",19),e._uU(23,"Enables the alternate leader rule by which additional models can be promoted to leader and leader models can be demoted to regular models."),e.qZA()()(),e.TgZ(24,"p"),e._uU(25),e.qZA(),e.TgZ(26,"p")(27,"sup"),e._uU(28,"1"),e.qZA(),e._uU(29),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(25),e.AsE("A full description on Freeband construction rules can be found in the Living Rulebook (v",t.lrbService.version,") starting on page ",t.lrbService.buildingRules,". Printing this page using your browser's print option will give you a formatted display of your selected models."),e.xp6(4),e.hij(" By default the Alt Leader is given the MAR increase but you can use the 'Edit' button to switch the increase to any weapon or CAR. You might also notice a value change in the baseline value dependent on the rules around a MAR increase. Full rules are on page ",t.lrbService.altLeaderRules,".")}}let Xt=(()=>{class n{constructor(t,i,o,s,l){this.commService=t,this.dbService=i,this.lrbService=o,this.dialog=s,this.snackBar=l,this.altLeader=!1,this.breakValue=0,this.buildSnackRef=void 0,this.completeFollowerCount=0,this.completeHeroCount=0,this.extraModels=[],this.faction="",this.freebandBaseValue=0,this.freebandTotalValue=0,this.limit=0,this.models={},this.scoutingPoints=0,this.totalLifePoints=0,this.errorMessages=[],this.factionRules={"Azura Windborne":this.azuraRules,"Black Rose Bandits":this.blackRoseBanditsRule,"Black Thorn Bandits":this.blackThornBanditsRule,"The Collective":this.collectiveRules,"Darkgrove Demons":this.darkgroveRules,"Demons of Karelon":this.demonsRules,"Eclipse Sisterhood":this.eclipseRules,"Falkaaran Adventurers":this.falkaaranRules,"Grular Invaders":this.grularRules,"Haradelan Questers":this.haradelanRules,"Kandoran Deathmasters":this.kandoranRules,"Koronnan Moonsworn":this.koronnanRules,"Kuzaarik Forgers":this.kuzaarikRules,"Mershael Corsairs":this.mershaelRules,"Ravenblade Mercenaries":this.ravenbladeRules,"Shakrim Wavestalkers":this.shakrimRules,"Traazorite Crusaders":this.traazoriteRules,"Trilian Seekers":this.trilianRules,"Urdaggar Tribes of Ruin":this.urdaggarRuinRules,"Urdaggar Tribes of Valor":this.urdaggarValorRules,"Varkraalan Unchained":this.varkraalanRules},this.leaderId=this.uuidv4(),this.casterId=this.uuidv4(),this.reset()}ngOnInit(){this.commService.getFreeband().subscribe(t=>{if(t)this.selectedFreeband=JSON.parse(JSON.stringify(t));else{const i=this.dbService.getPreviousFreeband().subscribe(o=>{void 0!==o&&this.dialog.open(ei).afterClosed().subscribe(l=>{l?this.selectedFreeband=o:this.dbService.deleteOldFreeband()}),i.unsubscribe()})}})}ngOnDestroy(){this.buildSnackRef&&this.buildSnackRef.dismiss()}addModel(){this.extraModels.push(this.uuidv4())}calculateFreeband(){var t,i,o,s,l,u,d,m;if(!this.faction)return;let f,O,b=!1,T=0,S=0,Z=0;this.completeFollowerCount=0,this.completeHeroCount=0,this.errorMessages=[];let p=!1,_=0;this.freebandBaseValue=0,this.freebandTotalValue=0;let w,r=0,x=0,C=0,ve=0;this.totalLifePoints=0,this.scoutingPoints=0;let be=!1;for(let Y of Object.keys(this.models)){let c=this.models[Y];if(void 0===c||!("stats"in c))continue;this.freebandBaseValue+=c.value,this.freebandTotalValue+=null!==(t=c.stats.modelValue)&&void 0!==t?t:c.value,c.stats.lifePoints&&(this.totalLifePoints+=c.stats.talentList&&c.stats.talentList.indexOf("Expendable")>-1?c.stats.lifePoints/2:c.stats.lifePoints),"Hero"===c.stats.type&&(this.completeHeroCount++,"Kurgozar"===c.name&&this.completeHeroCount++,(null===(i=c.stats.talentList)||void 0===i?void 0:i.includes("Ally"))&&(S++,void 0===f&&(f=c.primaryFaction),f.some(I=>c.primaryFaction.includes(I))||this.addErrorMessage("You can only recruit allies from the same faction."),"Zetakor"===c.name&&(be=!0),"Irvlor"===c.name&&x++,"Keldan"===c.name&&C++,(null===(o=c.stats.talentList)||void 0===o?void 0:o.includes("Fly"))&&(b=!0))),"Follower"===c.stats.type&&(this.completeFollowerCount++,c.stats.talentList&&c.stats.talentList.indexOf("Ally")>-1&&(T++,void 0===f&&(f=c.primaryFaction),f.some(I=>c.primaryFaction.includes(I))||this.addErrorMessage("You can only recruit allies from the same faction."))),c.stats.talentList&&c.stats.talentList.indexOf("Leader")<0&&"Caster"!==c.type&&"Hero"===c.stats.type&&(r++,"Kurgozar"===c.name&&r++),c.stats.talentList&&c.stats.talentList.indexOf("Leader")>-1&&(w=c),(null===(s=c.stats.talentList)||void 0===s?void 0:s.includes("Scout"))&&(this.scoutingPoints+=2),c.stats.casting&&(Z++,O=c.stats.casting.type),(null===(l=c.stats.talentList)||void 0===l?void 0:l.includes("Familiar"))&&_++,(null===(u=c.stats.skillList)||void 0===u?void 0:u.includes("Perform"))&&ve++,(null===(d=c.stats.talentList)||void 0===d?void 0:d.includes("Fly"))&&!c.stats.talentList.includes("Ally")&&(p=!0);let Ce=0;for(let I in this.models)this.models[I].name===c.name&&"Hero"===c.stats.type&&Ce++;const ye=("Marauder"===c.name||"Impaler"===c.name)&&this.limit>250?3:"Jhenkar"===c.name?1:2;Ce>ye&&this.addErrorMessage(`You can only have ${ye} of a hero model (${c.name}).`),(null===(m=c.stats.talentList)||void 0===m?void 0:m.includes("Limited"))&&this.addErrorMessage(this.checkLimitedModel(c.displayName));try{this.addErrorMessage(this.factionRules[this.faction].call(this,c))}catch(I){console.log(`No special rule for ${this.faction}`)}}this.freebandTotalValue>this.limit&&this.addErrorMessage("Total model value is too high. Remove models until value comes under the limit.");let L=Math.floor((this.limit-1)/50);L=L<4?4:L,(null==w?void 0:w.stats.casting)&&1===Z&&L++,L<r&&this.addErrorMessage(`Too many hero units added. You can only have ${L} plus one for each 50 points over 251.`),p&&b&&this.addErrorMessage("You may not recruit both an ally model and faction model with fly."),((this.completeHeroCount-S)/2<S||(this.completeFollowerCount-T)/2<T)&&this.addErrorMessage("Too many ally models selected. There must be a 2:1 ratio of ally to non-ally models for a given type."),be&&w&&"M"!==w.gender&&this.addErrorMessage("Zetakor can only be in a freeband lead by a male."),x>1&&this.addErrorMessage("There can be only one Irvlor."),C>1&&this.addErrorMessage("There can be only one Keldan."),Z>("Koronnan Moonsworn"===this.faction?2:1)&&this.addErrorMessage("You have too many casters."),"energy"==O&&_>0&&this.addErrorMessage("Only spirit casters can take familiars."),_>Z&&this.addErrorMessage("You have too many familiars."),ve>1&&this.addErrorMessage("You have too many performers."),this.errorMessages.length>0?(this.buildSnackRef=this.snackBar.open("Invalid build","View",{panelClass:"invalid-build"}),this.buildSnackRef.onAction().subscribe(()=>{const Y=document.getElementById("errorMessage");Y&&Y.scrollIntoView()})):this.buildSnackRef&&this.buildSnackRef.dismiss(),this.breakValue=Math.ceil(this.totalLifePoints/2);const si=this.getCurrentFreeband();this.dbService.saveCurrentFreeband(si)}downloadFreeband(){const t=this.getCurrentFreeband(),i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=uft-8,"+encodeURIComponent(JSON.stringify(t))),i.setAttribute("download","freeband.json"),i.style.display="None",document.body.appendChild(i),i.click(),document.body.removeChild(i)}loadFreeband(){this.dialog.open(ti).afterClosed().subscribe(i=>{if(i){if(!i.type||"application/json"!==i.type)return void console.log("Report error");const o=new FileReader;o.addEventListener("load",s=>{const l=s.target;if(l){const u=JSON.parse(l.result);this.selectedFreeband=u}});try{o.readAsText(i)}catch(s){console.log("Report error")}}})}modelSelected(t){t.component_id&&("type"in t?this.models[t.component_id]=t:delete this.models[t.component_id]),this.calculateFreeband()}optionsSet(t){var i,o,s,l,u;if(this.limit=t.freebandLimit,this.faction!==t.faction&&this.reset(),this.faction=t.faction,this.altLeader=t.altLeader,this.selectedFreeband){this.extraModels=[];for(let d of this.selectedFreeband.models){let m=ge.k.find(f=>f.displayName===d.displayName&&f.factions.includes(t.faction));if(m=JSON.parse(JSON.stringify(m)),!m)return console.error(`Could not find model: ${d.displayName}`),void console.error(d);if((null===(i=d.stats)||void 0===i?void 0:i.advancements)&&(m.stats.advancements=d.stats.advancements),(null===(o=d.stats)||void 0===o?void 0:o.injuries)&&(m.stats.injuries=d.stats.injuries),(null===(s=d.stats)||void 0===s?void 0:s.items)&&(m.stats.items=d.stats.items),(null===(l=d.stats)||void 0===l?void 0:l.options)&&(m.stats.options=d.stats.options),(null===(u=d.stats)||void 0===u?void 0:u.veteran)&&(m.stats.veteran=d.stats.veteran),"Leader"===d.type)this.models[this.leaderId]=m;else if("Caster"===d.type)this.models[this.casterId]=m;else{const f=this.uuidv4();this.extraModels.push(f),this.models[f]=m}}setTimeout(()=>this.selectedFreeband=void 0,1)}else this.calculateFreeband()}print(){window.print()}removeModel(t){this.extraModels.splice(this.extraModels.indexOf(t),1),delete this.models[t],this.calculateFreeband()}addErrorMessage(t){t&&this.errorMessages.indexOf(t)<0&&this.errorMessages.push(t)}azuraRules(t){}blackRoseBanditsRule(t){}blackThornBanditsRule(t){}checkLimitedModel(t){let i=0;for(let o in this.models)this.models[o].name===t&&i++;if(i>0&&this.limit/i<75)return`Can only have one ${t} for each 75 points in the freeband's base value.`}collectiveRules(t){let i=0,o=0,s=0,l=0;for(let u in this.models)"Irvlor"===this.models[u].name&&i++,"Keldan"===this.models[u].name&&o++,"Tyrsan"===this.models[u].name&&s++,"Merchant"===this.models[u].name&&l++;return i>1?"The Collective can only have one Irvlor.":o>1?"The Collective can only have one Keldan.":s>1?"The Collective can only have one Tyrsan.":l>1?"The Collective can only have one Merchant.":void 0}darkgroveRules(t){}demonsRules(t){let i=0,o=0;for(let s in this.models)"Hero"===this.models[s].stats.type&&i++,"Skrot"===this.models[s].name&&o++;if(o>2*i)return"Demons may not have more than twice as many skrots as heroes."}eclipseRules(t){}falkaaranRules(t){if(t.name.indexOf("Jhenkar")>-1){let i=!1;for(let o in this.models)if("Shadow Hunter"===this.models[o].name&&(i=!0,t.displayName.indexOf(this.models[o].type)<0))return"The Jhenkar selection must match the selected Shadow Hunter.";if(!i)return"Jhenkar can only be used along side a Shadow Hunter."}if(t.displayName.indexOf("Lightbringer (Shadow Hunter ally)")>-1){let i=!1;for(let o in this.models)"Shadow Hunter"===this.models[o].name&&"Leader"===this.models[o].type&&(i=!0);if(!i)return"Lightbringer (trusted ally) can only be added when led by a Shadow Hunter."}if(t.name.indexOf("Sho'pel")>-1){let i=!1;for(let o in this.models)"Ravenblade Lieutenant"===this.models[o].name&&"Leader"===this.models[o].type&&(i=!0);if(!i)return"Sho'pel can only be added when led by a Ravenblade Lieutenant."}}getCurrentFreeband(){return{faction:this.faction,freebandLimit:this.limit,altLeader:this.altLeader,models:Object.values(this.models).map(t=>{var i,o,s,l,u,d,m,f;return{displayName:t.displayName,type:t.type,stats:{advancements:(null===(i=t.stats)||void 0===i?void 0:i.advancements)?t.stats.advancements:null,casting:(null===(o=t.stats)||void 0===o?void 0:o.casting)?t.stats.casting:null,items:(null===(s=t.stats)||void 0===s?void 0:s.items)?t.stats.items:null,injuries:(null===(l=t.stats)||void 0===l?void 0:l.injuries)?t.stats.injuries:null,melee:(null===(u=t.stats)||void 0===u?void 0:u.melee)?t.stats.melee:null,options:(null===(d=t.stats)||void 0===d?void 0:d.options)?t.stats.options:null,range:(null===(m=t.stats)||void 0===m?void 0:m.range)?t.stats.range:null,veteran:(null===(f=t.stats)||void 0===f?void 0:f.veteran)?t.stats.veteran:null},characterName:t.characterName?t.characterName:null,gender:t.gender?t.gender:null}})}}grularRules(t){}haradelanRules(t){if(t.name.indexOf("Sho'pel")>-1){let i=!1;for(let o in this.models)"Ravenblade Lieutenant"===this.models[o].name&&"Leader"===this.models[o].type&&(i=!0);if(!i)return"Sho'pel can only be added when led by a Ravenblade Lieutenant."}}kandoranRules(t){let i=0,o=0;for(let s in this.models)"Hero"===this.models[s].stats.type&&i++,"Shambler"===this.models[s].name&&o++;if(o>2*i)return"Kandoran may not have more than twice as many shamblers as heroes."}koronnanRules(t){let i=0,o=0,s=0;for(let l in this.models)"Mizrakai"===this.models[l].name&&i++,"Moons Priest"===this.models[l].name&&o++,"Moons Priestess"===this.models[l].name&&s++;return i>1?"Koronnan can only have one Mizrakai.":o>1?"Koronnan can only have one Moons Priest.":s>1?"Koronnan can only have one Moons Priestess.":void 0}kuzaarikRules(t){if(t.name.indexOf("Jhenkar")>-1){let i=!1;for(let o in this.models)"Shadow Hunter"===this.models[o].name&&(i=!0);if(!i)return"Jhenkar can only be used along side a Shadow Hunter."}}mershaelRules(t){}ravenbladeRules(t){if(t.name.indexOf("Sho'pel")>-1){let l=!1;for(let u in this.models)"Ravenblade Lieutenant"===this.models[u].name&&"Leader"===this.models[u].type&&(l=!0);if(!l)return"Sho'pel can only be added when led by a Ravenblade Lieutenant."}const i=[];for(let l in this.models)"Hero"===this.models[l].stats.type&&i.push(this.models[l].name);const o=["Mizrakai","Nightwhisper","Stag Warrior","Stalker","Takar Hunter","Truthseeker"],s=i.filter(l=>o.includes(l));return new Set(s).size!==s.length?`Mercenaries may not have duplicate heroes of ${o.join(", ")}.`:void 0}shakrimRules(t){}traazoriteRules(t){if("F"===t.gender)return"Traazorites cannot have female models in their freeband."}trilianRules(t){}urdaggarRuinRules(t){if("Destroyer"===t.displayName){let i=!1,o=0;for(let s in this.models)"Dark Herald"===this.models[s].name&&"Leader"===this.models[s].type&&(i=!0),"Destroyer"===this.models[s].displayName&&o++;if(!i)return"Destroyer can only be added when led by a Dark Herald.";if(o>1)return"Only one Destroyer can be recruiter."}}urdaggarValorRules(t){}varkraalanRules(t){}reset(){this.extraModels=[],this.extraModels.push(this.uuidv4()),this.extraModels.push(this.uuidv4()),this.extraModels.push(this.uuidv4()),this.casterId=this.uuidv4(),this.leaderId=this.uuidv4(),this.freebandBaseValue=0,this.models={},this.totalLifePoints=0}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let i=16*Math.random()|0;return("x"==t?i:3&i|8).toString(16)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36($e.D),e.Y36(Ke.M),e.Y36(We.b),e.Y36(U),e.Y36(de.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-builder"]],decls:4,vars:3,consts:[[3,"selectedOptions","onOptionsSet"],[4,"ngIf","ngIfElse"],["setup",""],[1,"freebandStats","noSetHeight"],[1,"printOnly","bold-text","flextra"],[1,"bold-text"],[1,"noPrint"],[1,"printOnly","bold-text"],["id","notesSection",1,"printOnly","bold-text"],["id","optionButtons"],["mat-raised-button","",1,"mat-accent","noPrint",3,"click"],["class","noSetHeight noPrint","id","errorMessage",4,"ngFor","ngForOf"],["type","Leader",3,"faction","altLeader","selectedModel","componentId","onModelSelected"],["type","Caster",3,"faction","selectedModel","componentId","onModelSelected"],[4,"ngFor","ngForOf"],["mat-raised-button","",1,"mat-accent","noPrint",2,"margin-left","1rem","margin-bottom","1rem",3,"click"],["id","errorMessage",1,"noSetHeight","noPrint"],["type","Standard",3,"faction","altLeader","selectedModel","componentId","onModelSelected","onModelRemoved"],[2,"padding-top","1em"],["matLine",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"freeband-setup",0),e.NdJ("onOptionsSet",function(s){return i.optionsSet(s)}),e.qZA(),e.YNc(1,Kt,46,15,"ng-container",1),e.YNc(2,Wt,30,3,"ng-template",null,2,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("selectedOptions",i.selectedFreeband),e.xp6(1),e.Q6J("ngIf",i.faction&&i.limit)("ngIfElse",o)}},directives:[et,y.O5,A.lW,y.sg,Vt,X.i$,X.Tg,M.X2],styles:["#optionButtons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem}.noSetHeight[_ngcontent-%COMP%]{height:initial}#errorMessage[_ngcontent-%COMP%]{white-space:normal;background-color:red;padding:.5rem 0}.freebandStats[_ngcontent-%COMP%]{margin-bottom:1rem}.freebandStats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.freebandStats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:1rem;flex:1 1;white-space:nowrap;min-width:25%}.freebandStats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span.flextra[_ngcontent-%COMP%]{flex:3 1}.freebandStats[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #notesSection[_ngcontent-%COMP%]{width:100%}"]}),n})(),ei=(()=>{class n{constructor(t){this.dialogRef=t}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["load-previous"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-flat-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-flat-button","","color","primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Load Previous?"),e.qZA(),e.TgZ(2,"div",1)(3,"p"),e._uU(4,"A previous freeband was found. Do you want to load it?"),e.qZA()(),e.TgZ(5,"div",2)(6,"button",3),e.NdJ("click",function(){return i.onNoClick()}),e._uU(7,"No"),e.qZA(),e.TgZ(8,"button",4),e._uU(9,"Yes"),e.qZA()()),2&t&&(e.xp6(8),e.Q6J("mat-dialog-close",!0))},directives:[$,K,W,A.lW,se],encapsulation:2}),n})(),ti=(()=>{class n{constructor(t){this.dialogRef=t,this.file=void 0}onCancel(){this.dialogRef.close()}onLoad(t){const i=document.querySelector("input[type=file]");if(i){const o=i.files;o&&this.dialogRef.close(o[0])}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["load-json-file"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["type","file","accept",".json",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-flat-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Load JSON File"),e.qZA(),e.TgZ(2,"div",1)(3,"p"),e._uU(4,"Select a previously downloaded .json file"),e.qZA(),e.TgZ(5,"input",2),e.NdJ("ngModelChange",function(s){return i.file=s}),e.qZA()(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return i.onCancel()}),e._uU(8,"Cancel"),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.onLoad(i.file)}),e._uU(10,"Load"),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngModel",i.file))},directives:[$,K,g.Fj,g.JJ,g.On,W,A.lW],encapsulation:2}),n})();const ii=[{path:"",component:Xt}];let ni=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[fe.Bz.forChild(ii)],fe.Bz]}),n})(),oi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[y.ez,g.u5,A.ot,q.p9,re,X.ie,de.ZX,ni,qe,ze]]}),n})()}}]);